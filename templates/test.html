<!DOCTYPE html>
<html>

<head>
  <title>Volume Shocker</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>
  <h1>Volume Shocker</h1>
  <table id="volumeShockerTable">
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Company Name</th>
        <th>Last Price</th>
        <th>Volume</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>
    $(document).ready(function () {
      $.ajax({
        url: '/volume-shocker/',
        method: 'GET',
        success: function (data) {
          createTable(data);
        },
        error: function (error) {
          console.log(error);
        }
      });
  
      function createTable(data) {
        console.log(data);
        const tableBody = $('#volumeShockerTable tbody');
        
        // Clear any existing rows in the table body
        tableBody.empty();
  
        // Iterate over the data array using the map function
        var rows = data.map(function (item) {
          return '<tr>' +
            '<td>' + item.symbol + '</td>' +
            '<td>' + item.companyName + '</td>' +
            '<td>' + item.lastPrice + '</td>' +
            '<td>' + item.volume + '</td>' +
            '</tr>';
        });
  
        // Join the rows array and append it to the table body
        tableBody.append(rows.join(''));
      }
    });
  </script>
  
</body>

</html>