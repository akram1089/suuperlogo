<!DOCTYPE html>
<html>

<head>
  <title>Stock Listing</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
  <h1>SME Stocks</h1>
  <table id="sme-table">
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Instrument</th>
      </tr>
    </thead>
    <tbody id="sme_data"></tbody>
  </table>

  <h1>Equity Stocks</h1>
  <table id="equity-table">
    <thead>
      <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Instrument</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    $(document).ready(function () {
      $.ajax({
        url: '/stock-listing/',
        type: 'GET',
        dataType: 'json',
        success: function (response) {
          console.log("Response:", response);
          console.log("Response length:", response.length);
          
          var sme_all = response.replaceAll("'", '"');
          console.log("Modified response:", sme_all);
          
          try {
            var sme_data = JSON.parse(sme_all);
            console.log(sme_data);
            console.log(typeof sme_data);
            
            sme_data.forEach(function (rec) {
              console.log(rec.symbol);
              console.log(rec.name);
            });
          } catch (error) {
            console.error('Error parsing JSON:', error);
          }
        }
      });
    });
  </script>
</body>

</html>
